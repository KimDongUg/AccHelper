<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구독 관리 - 보태미 경리도우미</title>
    <link rel="icon" type="image/png" href="/assets/images/logo.png">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/billing.css">
    <script src="https://js.tosspayments.com/v2/standard"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">본문으로 건너뛰기</a>

    <header class="header" role="banner">
        <div class="header-left">
            <a href="/" class="header-logo" aria-label="보태미 경리도우미 홈으로 이동">
                <img src="/assets/images/logo.png" alt="보태미 로고" aria-hidden="true">
                <span>경리언니들 제가 도와드릴께요~ 힘내세요!</span>
            </a>
            <nav class="header-nav" aria-label="메인 내비게이션">
                <a href="/">AI 챗봇</a>
                <a href="#" class="disabled" aria-disabled="true" title="준비 중입니다">부과내역서</a>
            </nav>
        </div>
        <div class="header-right">
            <span id="companyLabel" class="company-label" style="display:none;"></span>
            <a href="/admin.html" class="btn btn-outline btn-sm" id="adminLink">관리자</a>
        </div>
    </header>

    <main id="main-content" class="billing-container">
        <h1 class="billing-title">구독 관리</h1>

        <!-- 알림 메시지 -->
        <div id="billingAlert" class="billing-alert" role="alert" aria-live="polite" style="display:none;">
            <span id="billingAlertMsg"></span>
        </div>

        <!-- 로딩 -->
        <div id="billingLoading" class="billing-loading">
            <div class="billing-spinner"></div>
            <p>구독 정보를 불러오는 중...</p>
        </div>

        <!-- 구독 상태 카드 -->
        <section id="subscriptionStatus" class="billing-section" style="display:none;">
            <div class="status-card">
                <div class="status-header">
                    <h2>현재 구독</h2>
                    <span id="statusBadge" class="badge"></span>
                </div>
                <div class="status-body">
                    <div class="status-row">
                        <span class="status-label">플랜</span>
                        <span id="planName" class="status-value">-</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">등록 카드</span>
                        <span id="cardInfo" class="status-value">-</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">다음 결제일</span>
                        <span id="nextPayDate" class="status-value">-</span>
                    </div>
                </div>
                <div class="status-actions">
                    <button id="changeCardBtn" class="btn btn-outline btn-sm">카드 변경</button>
                    <button id="cancelSubBtn" class="btn btn-danger btn-sm">구독 해지</button>
                </div>
            </div>
        </section>

        <!-- 프로모션 배너 -->
        <section id="promoSection" class="billing-section" style="display:none;">
            <div class="promo-banner">
                <div class="promo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                </div>
                <div class="promo-content">
                    <strong>선착순 10개 업체 50% 할인</strong>
                    <p>지금 가입하면 월 <b>24,500원</b>에 평생 이용! (정가 49,000원)</p>
                </div>
            </div>
        </section>

        <!-- 플랜 선택 -->
        <section id="planSection" class="billing-section" style="display:none;">
            <h2 class="section-title">요금제</h2>
            <div class="plan-grid">
                <div class="plan-card" data-plan="basic">
                    <div class="plan-badge">베이직</div>
                    <div class="plan-trial-badge">14일 무료체험</div>
                    <div class="plan-price">
                        <span class="price-original">49,000원</span>
                        <span class="price-amount">24,500</span>
                        <span class="price-unit">원/월</span>
                    </div>
                    <p class="plan-price-note">얼리버드 50% 할인 (평생 유지)</p>
                    <ul class="plan-features">
                        <li>AI 경리 고객응대 무제한</li>
                        <li>Q&A 등록 및 관리</li>
                        <li>기본 관리비 안내</li>
                        <li>14일 무료체험 후 자동 결제</li>
                    </ul>
                    <div class="plan-actions">
                        <button id="trialBtn" class="btn btn-primary plan-select-btn">14일 무료체험 시작</button>
                        <button id="trialExpiredBtn" class="btn btn-primary plan-select-btn" disabled style="display:none;">무료체험 기간이 끝났습니다.</button>
                        <div class="plan-divider"><span>또는</span></div>
                        <button id="subscribeBtn" class="btn btn-outline plan-select-btn">구독 신청</button>
                    </div>
                </div>
            </div>

            <!-- 정책 안내 -->
            <div class="billing-policy">
                <h3>이용 안내</h3>
                <ul>
                    <li>14일 무료체험 기간 중 언제든 해지 가능합니다.</li>
                    <li>무료체험 종료 후 월 자동결제가 시작됩니다.</li>
                    <li>첫 결제 후 7일 이내 전액 환불 가능합니다.</li>
                    <li>언제든 다음 달부터 구독 해지가 가능합니다.</li>
                </ul>
            </div>
        </section>
    </main>

    <footer class="site-footer" role="contentinfo">
        <div class="footer-inner">
            <nav class="footer-links" aria-label="정책 링크">
                <a href="/privacy.html">개인정보처리방침</a>
                <a href="/terms.html">이용약관</a>
                <a href="/copyright.html">저작권 정책</a>
                <a href="/contact.html">문의하기</a>
            </nav>
            <p class="footer-copyright">&copy; 2026 보태미 - 경리도우미(Accounting Helper). All rights reserved.</p>
            <p class="footer-contact">운영자 이메일: <a href="mailto:kduaro124@naver.com">kduaro124@naver.com</a></p>
        </div>
    </footer>

    <script src="/js/api.js"></script>
    <script src="/js/billing.js"></script>
</body>
</html>
